


properties(Oâ€˜yinchilarning egalik qilayotgan uylar, garajlar, ofislar va kazinolar ğŸ ğŸ¢ğŸ°):

    id                      â†’ Mulkning unikal identifikatori (primary key). Har bir mulkka avtomatik ID beriladi.
    owner_id                â†’ Mulk egasining players jadvalidagi ID si. Ushbu mulkning qaysi oâ€˜yinchiga tegishli ekanligini bildiradi. Agar oâ€˜yinchi oâ€˜chirilsa, uning mulklari ham oâ€˜chadi (ON DELETE CASCADE).
    type                    â†’ Mulk turi. Quyidagi qiymatlardan biri boâ€˜lishi kerak:
                house       â†’ Uyi
                garage      â†’ Garaji
                office      â†’ Ofis binos
                nightclub   â†’ Kechki klub
                casino      â†’ Kazino
    location                â†’ Mulkning manzili. Qayerda joylashganligi haqida maâ€™lumot (masalan, "Vinewood Hills" yoki "Downtown").
    price                   â†’ Mulkning narxi. Oâ€˜yinchi ushbu mulkni sotib olish uchun toâ€˜laydigan mablagâ€˜ (USD formatida).
    rent_income             â†’ Passiv daromad. Agar mulk ijaraga berilsa yoki biznes uchun ishlatilsa, har hafta yoki har oy qancha daromad keltirishi koâ€˜rsatiladi.
    max_capacity            â†’ Ichiga sigâ€˜adigan odamlar yoki transport vositalari soni.
        Uylarda                 â†’ Nechta odam yashashi mumkin
        Garajlarda              â†’ Nechta transport joylashishi mumkin
        Ofis/Nightclub/Casino   â†’ Nechta oâ€˜yinchi yoki NPC (botlar) sigâ€˜ishi mumkin
    created_at              â†’ Mulk roâ€˜yxatga olingan sana. Ushbu mulk qachon sotib olinganligi yoki qoâ€˜shilganligini bildiradi.


1-topshiriq:
    Mulkni sotish
    Tavsif:

        Mulkni sotish uchun funksiya yozing.

        sell_property(player_id, property_id) funksiyasini yozing. Bu funksiya player_id va property_id ni qabul qiladi.
        Agar oâ€˜yinchi mulkni sotmoqchi boâ€˜lsa, mulkning price qiymatini oâ€˜yinchining money ustuniga qoâ€˜shing.
        Mulknig owner_id qiymatini NULL ga oâ€˜zgartiring, chunki oâ€˜yinchi mulkni sotib yuboradi.
        Funksiya mulkni muvaffaqiyatli sotganini qaytarsin.





2-topshiriq:

    Jamoa aâ€™zolari va ularga tegishli mulklar
    Tavsif:

        Jamoa aâ€™zolarini va ularga tegishli mulklarni koâ€˜rsatuvchi view yaratish.

        crew_properties nomli view yarating, unda quyidagi maâ€™lumotlar boâ€˜lishi kerak:
        Jamoaning name
        Jamoa aâ€™zosi boâ€˜lgan oâ€˜yinchining username
        Oâ€˜yinchiga tegishli property (mulk) nomi, turi, va manzili

3-topshiriq:
    Oâ€˜yinchining jinoyat tarixini va qamoq holatini koâ€˜rsatish
    Tavsif:

        Oâ€˜yinchining jinoyat tarixini va qamoq holatini koâ€˜rsatuvchi view yaratish.

        player_crime_records nomli view yarating, unda quyidagi maâ€™lumotlar boâ€˜lishi kerak:
        Oâ€˜yinchining username
        Jinoyat turi crime_type
        Jinoyat vaqtini va wanted_level_increase qiymatini koâ€˜rsatish
        Oâ€˜yinchining police_records jadvalidan status (qamoqda yoki ozodligi) va jail_time (qamoq vaqti) ni koâ€˜rsatish.



TRIGGER:
4-topshiriq:
    Mulkni sotgan oâ€˜yinchining pul balansini yangilash
    Tavsif:

        Agar oâ€˜yinchi mulkni sotgan boâ€˜lsa, mulk narxi miqdori uning money (pul balansiga) qoâ€˜shilsin.

        Trigger yarating, bu transactions jadvalidagi Sell tranzaksiyasidan soâ€˜ng players jadvalidagi oâ€˜yinchining money balansini yangilasÄ±n.

5-topshiriq:
    Mulkni sotganidan soâ€˜ng jinoyat darajasini yangilash
    Tavsif:

        Agar oâ€˜yinchi propertyni sotgan boâ€˜lsa, u holda wanted_level (jinoyat darajasi)ni avtomatik ravishda 1 ga kamaytirsin.

        Trigger yarating, bu transactions jadvalidagi Sell tranzaksiyasi kiritilganda, oâ€˜yinchining wanted_level darajasi 1 ga kamaytirilsin.

6-topshiriq:
    Jail time (qamoq vaqti) tugagandan soâ€˜ng oâ€˜yinchini ozod qilish
    Tavsif:

        Agar police_records jadvalidagi status (holat) "Jailed" boâ€˜lsa va jail_time (qamoq vaqti) tugagan boâ€˜lsa, oâ€˜yinchi statusni "Released" deb yangilash.

        Trigger yarating, bu police_records jadvalidagi jail_time ustuni 0 boâ€˜lganda, statusni "Released" ga oâ€˜zgartirsin.


function


create trigger name
after